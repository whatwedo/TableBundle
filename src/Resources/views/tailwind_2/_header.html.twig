{# Table Header #}
{% if table.option('title') or view is defined and view.definition.hasCapability(constant('whatwedo\\CrudBundle\\Enum\\Page::EXPORT')) or table.filterExtension and table.filterExtension.filters|length > 0 or table.searchExtension and table.option('searchable') %}

    <header class="whatwedo_table:header border-b border-neutral-200 px-4 py-4 sm:flex sm:items-center sm:justify-between">
        <div class="whatwedo_table:header__title flex-1 min-w-0 text-lg font-medium leading-6 text-neutral-900 sm:truncate">
            {% if table.option('title') %}
                <h1>
                    {{ table.option('title')|trans }}
                </h1>
            {% endif %}
        </div>
        <div class="mt-4 flex sm:mt-0 sm:ml-4">
            {% if view is defined and view.definition.hasCapability(constant('whatwedo\\CrudBundle\\Enum\\Page::EXPORT')) %}
                <div
                    {{ stimulus_controller('whatwedo/core-bundle/dropdown') }}
                    class="relative inline-block">
                    <button
                        {{ stimulus_action({'whatwedo/core-bundle/dropdown':['toggle', {'click@window': 'hide'}]}) }}
                        class="whatwedo_table:header__button whatwedo_table:header__button--download whatwedo_table-button" tabindex="-1"
                    >
                        {{ bootstrap_icon('download', { class: 'w-4 h-4' }) }}
                    </button>
                    <div
                        {{ stimulus_target('whatwedo/core-bundle/dropdown', 'menu') }}
                        class="p-2 z-50 hidden transition duration-300 transform w-72 origin-top-right absolute right-0 -bottom-3 transform translate-y-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5"
                        data-transition-enter-from="opacity-0 scale-95"
                        data-transition-enter-to="opacity-100 scale-100"
                        data-transition-leave-from="opacity-100 scale-100"
                        data-transition-leave-to="opacity-0 scale-95"
                        tabindex="-1"
                        >
                        {% for label,queryParameters in {'whatwedo_table.page' : app.request.query.all, 'whatwedo_table.all' : {'all':1}|merge(app.request.query.all)} %}
                            <a
                                href="{{ path(view.definition.getRoute(constant('whatwedo\\CrudBundle\\Enum\\Page::EXPORT')), queryParameters) }}"
                                class="whatwedo_table:header__button whatwedo_table:header__button--download whatwedo_table-button"

                            >
                                {{ label | trans }}
                            </a>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}

            {% if table.filterExtension and table.filterExtension.filters|length > 0 %}
            <button
                class="whatwedo_table:header__button whatwedo_table:header__button--filter whatwedo_table-button"
                type="button"
                {{ stimulus_action('whatwedo/table-bundle/filter', 'open') }}
            >
                {{ bootstrap_icon('funnel-fill', { class: 'w-4 h-4' }) }}
            </button>
            {% endif %}

            {% if table.searchExtension and table.option('searchable') %}
            <form
                action="{{ whatwedo_table_path_replace_arguments({ (whatwedo_table_parameter(table, 'page')) : 1 }) }}"
                class="whatwedo_table:header__search inline-flex items-center px-3 ml-2"
            >
                <div class="flex rounded-md shadow-sm">
                    <div class="relative flex items-stretch flex-grow focus-within:z-10">
                        <input
                            class="whatwedo_core-input--rounded-left"
                            type="search"
                            name="{{ whatwedo_table_parameter(table, 'query') }}" placeholder="Suchbegriff ..."
                            value="{{ table.searchExtension.query }}"
                        >
                    </div>
                    <button class="whatwedo_table-button--search" type="submit">
                        {{ bootstrap_icon('search', { class: 'h-4 w-4 text-neutral-400', alt: 'Suchen' }) }}
                    </button>
                </div>
            </form>
            {% endif %}
        </div>
    </header>

{% endif %}
